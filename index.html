<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
<style>
#player{
  position:left;
  margin:10px;
  width:150px;
  text-align:left;
  font-family:Helvetica, Arial;
}
#volume{
  border:none; 
  height:2px;
  background:hsla(180,75%,50%,1);
}
.ui-slider-handle{
  border-radius:50%;
  top: -5px !important;
  width: 11px !important;
  height: 11px !important;
  margin-left:-5px !important;
}
</style>
</head>
<body>
<div>
	<table>
		<tr>
			<td><input type="text" id="videot" maxlength="50" size="10"/></td>
			<td><button id="go">go</button></td>
			<td><button id="deeper">deeper</button></td>
			<td><span id="evendeeper"></span></td>
			<td><div id="player">
	<audio id="music1" loop="loop">
	  <source src="godeep/sarabande.mp3" type="audio/mpeg" controls="controls">
	</audio>
	<audio id="music2" loop="loop">
	  <source src="godeep/01SpiegelImSpiegel.mp3" type="audio/mpeg" controls="controls">
	</audio>
	<div id="volume"></div>
</div>
</td>
		</tr>    
	</table>
</div>


<div id="videoText">
<span id="stats"></span>
</div>

<script>

$("#videot").val("dare to");
$("#go").click(function(){
	$("#stats").html($("#videot").val());	
	videoEmbed.invoke();
});
$("#deeper").click(function(){		
	$("#music1")[0].play();
	$("#evendeeper").html("<button id=\"deepest\">deepest</button>");
	$(function() {
	  var $aud = $("#music1"),
	      $vol = $("#volume"),
	      AUDIO = $aud[0];
	  AUDIO.volume = 0.50;
	  $vol.slider( {
	    value : AUDIO.volume*100,
	    slide : function(ev, ui) {
	      $vol.css({background:"hsla(180,"+ui.value+"%,50%,1)"});
	      AUDIO.volume = ui.value/100; 
	    } 
	  });
	});
});
$("#evendeeper").click(function(){
	$("#music1")[0].pause();
	$("#music2")[0].play();
	$(function() {
	  var $aud = $("#music2"),
	      $vol = $("#volume"),
	      AUDIO = $aud[0];
	  AUDIO.volume = 1.0;
	  $vol.slider( {
	    value : AUDIO.volume*100,
	    slide : function(ev, ui) {
	      $vol.css({background:"hsla(180,"+ui.value+"%,50%,1)"});
	      AUDIO.volume = ui.value/100; 
	    } 
	  });
	});
});


var videoEmbed = {
    invoke: function(){        
        $("#stats").html(function(i, html) {
            return videoEmbed.convertMedia(html);
        });        
    },
    convertMedia: function(html){
        var pattern1 = /(?:http?s?:\/\/)?(?:www\.)?(?:vimeo\.com)\/?(.+)/g;
        var pattern2 = /(?:http?s?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(.+)/g;
        var pattern3 = /([-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?(?:jpg|jpeg|gif|png))/gi;
        
        if(pattern1.test(html)){
           var replacement = '<iframe width="840" height="690" src="//player.vimeo.com/video/$1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';
           
           var html = html.replace(pattern1, replacement);
        }                   
        if(pattern2.test(html)){
              var replacement = '<iframe width="840" height="690" src="http://www.youtube.com/embed/$1?autoplay=1" frameborder="0" allowfullscreen></iframe>';
              var html = html.replace(pattern2, replacement);
        }                 
        if(pattern3.test(html)){
            var replacement = '<a href="$1" target="_blank"><img class="sml" src="$1" /></a><br />';
            var html = html.replace(pattern3, replacement);
        }         
        return html;
    }
}

</script>
</body>
</html>